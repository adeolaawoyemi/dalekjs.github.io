<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>index.js - dalek-internal-actions</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="dalek-internal-actions"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: index.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*!
 *
 * Copyright (c) 2013 Sebastian Golasch
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the &quot;Software&quot;),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

&#x27;use strict&#x27;;

// ext. libs
var Q = require(&#x27;q&#x27;);
var uuid = require(&#x27;node-uuid&#x27;);

/**
 * @module
 */

var reporter = null;

/**
 * @constructor
 * @part Actions
 * @api
 */

var Actions = function () {
  this.uuids = {};
};

/**
 * Selector helper
 */

Actions.prototype.query = function (selector) {
  var that = !this.test ? this : this.test;
  that.lastChain.push(&#x27;querying&#x27;);
  that.selector = selector;
  that.querying = true;
  return this.test ? this : that;
};

Actions.prototype.$ = Actions.prototype.query;

/**
 * Triggers a mouse event on the first element found matching the provided selector.
 * Supported events are mouseup, mousedown, click, mousemove, mouseover and mouseout.
 * TODO: IMPLEMENT
 *
 * @method mouseEvent
 * @param {string} type
 * @param {string} selector
 * @chainable
 * @api
 */

Actions.prototype.mouseEvent = function (type, selector) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;mouseEvent&#x27;, &#x27;mouseEvent&#x27;, type, selector, hash);
  this._addToActionQueue([type, selector, hash], &#x27;mouseEvent&#x27;, cb);
  return this;
};

/**
 * Sets HTTP_AUTH_USER and HTTP_AUTH_PW values for HTTP based authentication systems.
 *
 * If your site is behind a HTTP basic auth, you&#x27;re able to set the username and the password
 *
 * &#x60;&#x60;&#x60;javascript
 * test.setHttpAuth(&#x27;OSWIN&#x27;, &#x27;rycbrar&#x27;)
 *     .open(&#x27;http://admin.therift.com&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * Most of the time, you&#x60;re not storing your passwords within files that will be checked
 * in your vcs, for this scenario, you have two options:
 *
 * The first option is, to use daleks cli capabilities to generate config variables
 * from the command line, like this
 *
 * &#x60;&#x60;&#x60;batch
 * $ dalek --vars USER=OSWIN,PASS=rycbrar
 * &#x60;&#x60;&#x60;
 *
 * &#x60;&#x60;&#x60;javascript
 * test.setHttpAuth(test.config.get(&#x27;USER&#x27;), test.config.get(&#x27;PASS&#x27;))
 *     .open(&#x27;http://admin.therift.com&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * The second option is, to use env variables to generate config variables
 * from the command line, like this
 *
 * &#x60;&#x60;&#x60;batch
 * $ SET USER=OSWIN
 * $ SET PASS=rycbrar
 * $ dalek
 * &#x60;&#x60;&#x60;
 *
 * &#x60;&#x60;&#x60;javascript
 * test.setHttpAuth(test.config.get(&#x27;USER&#x27;), test.config.get(&#x27;PASS&#x27;))
 *     .open(&#x27;http://admin.therift.com&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * If both, dalek variables &amp; env variables are set, the dalek variables win.
 * For more information about this, I recommend to check out the [configuration docs](/docs/config.html)
 *
 * @method setHttpAuth
 * @api
 * @param {string} username
 * @param {string} password
 * @return {Actions}
 */

Actions.prototype.setHttpAuth = function (username, password) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;setHttpAuth&#x27;, &#x27;setHttpAuth&#x27;, username, password, hash);
  this._addToActionQueue([username, password, hash], &#x27;setHttpAuth&#x27;, cb);
  return this;
};

/**
 * Switches to an iFrame context
 *
 * Sometimes you encounter situation, where you need to drive/access an iFrame sitting in your page.
 * You can access such frames with this mehtod, but be aware of the fact, that the complete test
 *
 * &#x60;&#x60;&#x60;html
 * &lt;div&gt;
 *   &lt;iframe id=&quot;login&quot; src=&quot;/login.html&quot;/&gt;
 * &lt;/div&gt;
 * &#x60;&#x60;&#x60;
 *
 * &#x60;&#x60;&#x60;javascript
 *  test.open(&#x27;http:adomain.withiframe.com&#x27;)
 *    .title().is(&#x27;Title of a page that embeds an iframe&#x27;)
 *    .toIFrame(&#x27;#login&#x27;)
 *      .title().is(&#x27;Title of a page that can be embedded as an iframe&#x27;)
 *    .toParent()
 * &#x60;&#x60;&#x60;
 *
 * @api
 * @method toFrame
 * @param {string} selector
 * @return {Actions}
 */

Actions.prototype.toFrame = function (selector) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;toFrame&#x27;, &#x27;toFrame&#x27;, selector, hash);
  this._addToActionQueue([selector, hash], &#x27;toFrame&#x27;, cb);
  return this;
};

/**
 * End of IFrame context
 *
 * @api
 * @method toParent
 */

Actions.prototype.toParent = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;toFrame&#x27;, &#x27;toFrame&#x27;, null, hash);
  this._addToActionQueue([null, hash], &#x27;toFrame&#x27;, cb);
  return this;
};

/**
 * Change scope to a specific window context
 *
 * @api
 * @method toWindow
 */

Actions.prototype.toWindow = function (name) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;toWindow&#x27;, &#x27;toWindow&#x27;, name, hash);
  this._addToActionQueue([name, hash], &#x27;toWindow&#x27;, cb);
  return this;
};

/**
 * Go back to the parent window context
 *
 * @api
 * @method toParentWindow
 */

Actions.prototype.toParentWindow = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;toWindow&#x27;, &#x27;toWindow&#x27;, null, hash);
  this._addToActionQueue([null, hash], &#x27;toWindow&#x27;, cb);
  return this;
};

/**
 * Waits until a function returns true to process any next step.
 *
 * You can also set a callback on timeout using the onTimeout argument,
 * and set the timeout using the timeout one, in milliseconds. The default timeout is set to 5000ms.
 *
 * @api
 * @method waitFor
 * @param {function} fn
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitFor = function (fn, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitFor&#x27;, &#x27;waitFor&#x27;, fn, timeout, hash);
  this._addToActionQueue([fn, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitFor&#x27;, cb);
  return this;
};

/**
 * Wait until a resource that matches the given testFx is loaded to process a next step.
 *
 * @api
 * @method waitForResource
 * @param {string} ressource
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitForResource = function (ressource, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitForResource&#x27;, &#x27;waitForResource&#x27;, ressource, timeout, hash);
  this._addToActionQueue([ressource, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitForResource&#x27;, cb);
  return this;
};

/**
 * Waits until the passed text is present in the page contents before processing the immediate next step.
 *
 * @api
 * @method waitForText
 * @param {string} text
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitForText = function (text, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitUntilVisible&#x27;, &#x27;waitUntilVisible&#x27;, text, timeout, hash);
  this._addToActionQueue([text, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitForText&#x27;, cb);
  return this;
};

/**
 * Waits until an element matching the provided selector expression is visible in the remote DOM to process a next step.
 *
 * @api
 * @method waitUntilVisible
 * @param {string} selector
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitUntilVisible = function (selector, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitUntilVisible&#x27;, &#x27;waitUntilVisible&#x27;, selector, timeout, hash);
  this._addToActionQueue([selector, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitUntilVisible&#x27;, cb);
  return this;
};

/**
 * Waits until an element matching the provided selector expression is no longer visible in remote DOM to process a next step.
 *
 * &#x60;&#x60;&#x60;javascript
 * &#x60;&#x60;&#x60;
 *
 * @api
 * @method waitWhileVisible
 * @param {string} selector
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitWhileVisible = function (selector, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitWhileVisible&#x27;, &#x27;waitWhileVisible&#x27;, selector, timeout, hash);
  this._addToActionQueue([selector, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitWhileVisible&#x27;, cb);
  return this;
};

/**
 * Take a screenshot of the current page.
 *
 * The pathname argument takes some placeholders that will be replaced
 * Placeholder:
 *
 *   - &#x60;:browser&#x60; - The browser name (e.g. ‘Chrome‘, ‘Safari‘, ‘Firefox‘, etc.)
 *   - &#x60;:version&#x60; -  The browser version (e.g. ‘10_0‘, ‘23_11_5‘, etc.)
 *   - &#x60;:os&#x60; - The operating system (e.g. &#x60;OSX&#x60;, &#x60;Windows&#x60;, &#x60;Linux&#x60;)
 *   - &#x60;:osVersion&#x60; - The operating system version (e.g &#x60;XP&#x60;, &#x60;7&#x60;, &#x60;10_8&#x60;, etc.)
 *   - &#x60;:viewport&#x60; - The current viewport in pixels (e.g. &#x60;w1024_h768&#x60;)
 *   - &#x60;:timestamp&#x60; - UNIX like timestapm (e.g. &#x60;637657345&#x60;)
 *   - &#x60;:date&#x60; - Current date in format MM_DD_YYYY (e.g. &#x60;12_24_2013&#x60;)
 *   - &#x60;:datetime&#x60; - Current datetime in format MM_DD_YYYY_HH_mm_ss (e.g. &#x60;12_24_2013_14_55_23&#x60;)
 *
 * &#x60;&#x60;&#x60;javascript
 * // creates &#x27;my/folder/my_file.png&#x27;
 * test.screenshot(&#x27;my/folder/my_file&#x27;);
 * // creates &#x27;my/page/in/safari/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in/:browser/homepage&#x27;);
 * // creates &#x27;my/page/in/safari_6_0_1/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in/:browser_:version/homepage&#x27;);
 * // creates &#x27;my/page/in/safari_6_0_1/on/osx/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in/:browser_:version/on/:os/homepage&#x27;);
 * // creates &#x27;my/page/in/safari_6_0_1/on/osx_10_8/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in/:browser_:version/on/:os_:osVersion/homepage&#x27;);
 * // creates &#x27;my/page/at/w1024_h768/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/at/:viewport/homepage&#x27;);
 * // creates &#x27;my/page/at/637657345/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in_time/:timestamp/homepage&#x27;);
 * // creates &#x27;my/page/at/12_24_2013/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in_time/:date/homepage&#x27;);
 * // creates &#x27;my/page/at/12_24_2013_14_55_23/homepage.png&#x27;
 * test.screenshot(&#x27;my/page/in_time/:datetime/homepage&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @api
 * @method screenshot
 * @param {string} pathname
 * @return {Actions}
 */

Actions.prototype.screenshot = function (pathname) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;screenshot&#x27;, &#x27;screenshot&#x27;, pathname, hash);
  this._addToActionQueue([&#x27;&#x27;, pathname, hash], &#x27;screenshot&#x27;, cb);
  return this;
};

/**
 * Pause steps suite execution for a given amount of time, and optionally execute a step on done.
 *
 * This makes sense, if you have a ticker for example, tht scrolls like every ten seconds
 * &amp; you want to assure that the visible content changes every ten seconds
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://myticker.org&#x27;)
 *   .visible(&#x27;.ticker-element:first&#x27;, &#x27;First ticker element is visible&#x27;)
 *   .wait(10000)
 *   .visible(&#x27;.ticker-element:nth-child(2)&#x27;, &#x27;Snd. ticker element is visible&#x27;)
 *   .wait(10000)
 *   .visible(&#x27;.ticker-element:last&#x27;, &#x27;Third ticker element is visible&#x27;)
 *   .all.success(&#x27;Ticker seems to work quite well&#x27;);
 * &#x60;&#x60;&#x60;
 * If no timeout argument is given, a default timeout of 5 seconds will be used
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://myticker.org&#x27;)
 *   .visible(&#x27;.ticker-element:first&#x27;, &#x27;First ticker element is visible&#x27;)
 *   .wait()
 *   .visible(&#x27;.ticker-element:nth-child(2)&#x27;, &#x27;Snd. ticker element is visible&#x27;)
 *   .wait()
 *   .visible(&#x27;.ticker-element:last&#x27;, &#x27;Third ticker element is visible&#x27;)
 *   .all.success(&#x27;This ticker changed every 5 seconds, cool!&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @method wait
 * @api
 * @param {number} timeout in milliseconds
 * @return {Actions}
 */

Actions.prototype.wait = function (timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;wait&#x27;, &#x27;wait&#x27;, timeout, hash);
  this._addToActionQueue([(timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;wait&#x27;, cb);
  return this;
};

/**
 * Reloads current page location.
 *
 * This is basically the same as hitting F5/refresh in your browser
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://google.com&#x27;)
 *   .refresh();
 * &#x60;&#x60;&#x60;
 *
 * @method reload
 * @api
 * @return {Actions}
 */

Actions.prototype.reload = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;reload&#x27;, &#x27;reload&#x27;, &#x27;&#x27;, hash);
  this._addToActionQueue([hash], &#x27;reload&#x27;, cb);
  return this;
};

/**
 * Moves a step forward in browser&#x27;s history.
 *
 * This is basically the same as hitting the forward button in your browser
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://google.com&#x27;)
 *   .open(&#x27;https://github.com&#x27;)
 *   .url.is(&#x27;https://github.com/&#x27;, &#x27;We are at GitHub&#x27;)
 *   .back()
 *   .url.is(&#x27;http://google.com&#x27;, &#x27;We are at Google!&#x27;)
 *   .forward()
 *   .url.is(&#x27;https://github.com/&#x27;, &#x27;Back at GitHub! Timetravel FTW&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @method forward
 * @api
 * @return {Actions}
 */

Actions.prototype.forward = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;forward&#x27;, &#x27;forward&#x27;, &#x27;&#x27;, hash);
  this._addToActionQueue([hash], &#x27;forward&#x27;, cb);
  return this;
};

/**
 * Moves back a step in browser&#x27;s history.
 *
 * This is basically the same as hitting the back button in your browser
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://google.com&#x27;)
 *   .open(&#x27;https://github.com&#x27;)
 *   .url.is(&#x27;https://github.com/&#x27;, &#x27;We are at GitHub&#x27;)
 *   .back()
 *   .url.is(&#x27;http://google.com&#x27;, &#x27;We are at Google!&#x27;)
 *   .forward()
 *   .url.is(&#x27;https://github.com/&#x27;, &#x27;Back at GitHub! Timetravel FTW&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @method back
 * @api
 * @return {Actions}
 */

Actions.prototype.back = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;back&#x27;, &#x27;back&#x27;, &#x27;&#x27;, hash);
  this._addToActionQueue([hash], &#x27;back&#x27;, cb);
  return this;
};

/**
 * Performs a click on the element matching the provided selector expression.
 *
 * If we take Daleks homepage (the one you&#x27;re probably visiting right now),
 * the HTML looks something like this
 *
 * &#x60;&#x60;&#x60;html
 * &lt;nav&gt;
 *   &lt;ul&gt;
 *     &lt;li&gt;&lt;a id=&quot;homeapge&quot; href=&quot;/index.html&quot;&gt;DalekJS&lt;/a&gt;&lt;/li&gt;
 *     &lt;li&gt;&lt;a id=&quot;docs&quot;  href=&quot;/docs.html&quot;&gt;Documentation&lt;/a&gt;&lt;/li&gt;
 *     &lt;li&gt;&lt;a id=&quot;faq&quot; href=&quot;/faq.html&quot;&gt;F.A.Q&lt;/a&gt;&lt;/li&gt;
 *   &lt;/ul&gt;
 * &lt;/nav&gt;
 * &#x60;&#x60;&#x60;
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://dalekjs.com&#x27;)
 *     .click(&#x27;#faq&#x27;)
 *     .title().is(&#x27;DalekJS - Frequently asked questions&#x27;, &#x27;What the F.A.Q.&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * By default, this performs a left click.
 *
 * @api
 * @method click
 * @param {string} selector
 * @return {Actions}
 */

Actions.prototype.click = function (selector) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;click&#x27;, &#x27;click&#x27;, selector, hash);
  this._addToActionQueue([selector, hash], &#x27;click&#x27;, cb);
  return this;
};

/**
 * Submits a form
 *
 * @api
 * @method submit
 */

Actions.prototype.submit = function (selector) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;submit&#x27;, &#x27;submit&#x27;, selector, hash);
  this._addToActionQueue([selector, hash], &#x27;submit&#x27;, cb);
  return this;
};

/**
 * Fills the fields of a form with given values.
 *
 * &#x60;&#x60;&#x60;html
 * &lt;nav&gt;
 *   &lt;ul&gt;
 *     &lt;li&gt;&lt;a id=&quot;homeapge&quot; href=&quot;/index.html&quot;&gt;DalekJS&lt;/a&gt;&lt;/li&gt;
 *     &lt;li&gt;&lt;a id=&quot;docs&quot;  href=&quot;/docs.html&quot;&gt;Documentation&lt;/a&gt;&lt;/li&gt;
 *     &lt;li&gt;&lt;a id=&quot;faq&quot; href=&quot;/faq.html&quot;&gt;F.A.Q&lt;/a&gt;&lt;/li&gt;
 *   &lt;/ul&gt;
 * &lt;/nav&gt;
 * &#x60;&#x60;&#x60;
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://dalekjs.com&#x27;)
 *     .setValue(&#x27;#ijustwannahaveavalue&#x27;, &#x27;a value&#x27;)
 *     .title().is(&#x27;DalekJS - Frequently asked questions&#x27;, &#x27;What the F.A.Q.&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @api
 * @method setValue
 * @param {string} selector
 * @param {string} value
 * @return {Actions}
 */

Actions.prototype.setValue = function (selector, value) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;setValue&#x27;, &#x27;setValue&#x27;, selector + &#x27; : &#x27; + value, hash);
  this._addToActionQueue([selector, value, hash], &#x27;setValue&#x27;, cb);
  return this;
};

/**
 * Performs an HTTP request for opening a given location.
 * You can forge GET, POST, PUT, DELETE and HEAD requests.
 *
 * &#x60;&#x60;&#x60;javascript
 * test.open(&#x27;http://dalekjs.com&#x27;)
 *     .url().is(&#x27;http://dalekjs.com&#x27;, &#x27;DalekJS I&#x27;m in you&#x27;);
 * &#x60;&#x60;&#x60;
 *
 * @api
 * @method open
 * @param {string} locations
 * @param {Object} settings
 * @return {Actions}
 */

Actions.prototype.open = function (location, settings) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;open&#x27;, &#x27;open&#x27;, location, hash);
  this._addToActionQueue([location, settings, hash], &#x27;open&#x27;, cb);
  return this;
};

/**
 *
 *
 * @api
 * @method type
 * @param {string} keystrokes
 * @return chainable
 */

Actions.prototype.type = function (selector, keystrokes) {
  var hash = uuid.v4();

  if (this.querying === true) {
    keystrokes = selector;
    selector = this.selector;
  }

  var cb = this._generateCallbackAssertion(&#x27;type&#x27;, &#x27;type&#x27;, selector, keystrokes, hash);
  this._addToActionQueue([selector, keystrokes], &#x27;type&#x27;, cb);
  return this;
};

/**
 *
 *
 * @api
 * @method answer
 * @param {string} keystrokes
 * @return chainable
 */

Actions.prototype.answer = function (keystrokes) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;promptText&#x27;, &#x27;promptText&#x27;, keystrokes, hash);
  this._addToActionQueue([keystrokes, hash], &#x27;promptText&#x27;, cb);
  return this;
};

/**
 *
 *
 * @api
 * @method acceptAlert
 * @param {string} keystrokes
 * @return chainable
 */

Actions.prototype.acceptAlert = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;acceptAlert&#x27;, &#x27;acceptAlert&#x27;, hash);
  this._addToActionQueue([hash], &#x27;acceptAlert&#x27;, cb);
  return this;
};

/**
 *
 *
 * @api
 * @method dismissAlert
 * @return chainable
 */

Actions.prototype.dismissAlert = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;dismissAlert&#x27;, &#x27;dismissAlert&#x27;, hash);
  this._addToActionQueue([hash], &#x27;dismissAlert&#x27;, cb);
  return this;
};

/**
 * Resizes the browser window
 */

Actions.prototype.resize = function (dimensions) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;resize&#x27;, &#x27;resize&#x27;, dimensions, hash);
  this._addToActionQueue([dimensions, hash], &#x27;resize&#x27;, cb);
  return this;
};

/**
 * Maximizes the browser window
 */

Actions.prototype.maximize = function () {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;maximize&#x27;, &#x27;maximize&#x27;, hash);
  this._addToActionQueue([hash], &#x27;maximize&#x27;, cb);
  return this;
};

/**
 * Sets a cookie
 */

Actions.prototype.setCookie = function (name, contents) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;setCookie&#x27;, &#x27;setCookie&#x27;, name, contents, hash);
  this._addToActionQueue([name, contents, hash], &#x27;setCookie&#x27;, cb);
  return this;
};

/**
 * Waits until an element matching the provided
 * selector expression exists in remote DOM to process any next step.
 *
 * @api
 * @method waitForElement
 * @param {string} selector
 * @param {number} timeout
 * @return {Actions}
 */

Actions.prototype.waitForElement = function (selector, timeout) {
  var hash = uuid.v4();
  var cb = this._generateCallbackAssertion(&#x27;waitForElement&#x27;, &#x27;waitForElement&#x27;, selector + &#x27; : &#x27; + timeout, hash);
  this._addToActionQueue([selector, (timeout ? parseInt(timeout, 10) : 5000), hash], &#x27;waitForElement&#x27;, cb);
  return this;
};

/**
 *
 * @private
 */

Actions.prototype._generateCallbackAssertion = function (key, type) {
  var cb = function (data) {
    if (data &amp;&amp; data.key === key &amp;&amp; !this.uuids[data.uuid]) {
      if ((data &amp;&amp; data.value) || data.value === null) {
        data.value = &#x27;&#x27;;
      }

      this.uuids[data.uuid] = true;
      reporter.emit(&#x27;report:action&#x27;, {
        value: data.value,
        type: type,
        uuid: data.uuid
      });
    }
  }.bind(this);
  return cb;
};

/**
 *
 * @private
 */

Actions.prototype._addToActionQueue = function (opts, driverMethod, cb) {
  this.actionPromiseQueue.push(function () {
    var deferred = Q.defer();
    // add a generic identifier as the last argument to any action method call
    opts.push(uuid.v4());
    // check the method on the driver object &amp;&amp; the callback function
    if (typeof(this.driver[driverMethod]) === &#x27;function&#x27; &amp;&amp; typeof(cb) === &#x27;function&#x27;) {
      // call the method on the driver object
      this.driver[driverMethod].apply(this.driver, opts);
      deferred.resolve();
    } else {
      deferred.reject();
    }

    // listen to driver message events &amp; apply the callback argument
    this.driver.events.on(&#x27;driver:message&#x27;, cb);
    return deferred.promise;
  }.bind(this));
  return this;
};

module.exports = function (opts) {
  reporter = opts.reporter;
  return Actions;
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
